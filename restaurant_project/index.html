<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>La Lumière — Fine French-Fusion Dining (Sandton)</title>
<meta name="description" content="La Lumière - Modern French-Fusion cuisine in Sandton. Book a table, view menu and sign up." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-gradient: linear-gradient(135deg,#0F2027 0%,#203A43 50%,#2C5364 100%);
    --text-color:#111;--muted:rgba(0,0,0,0.6);--card-bg:rgba(255,255,255,0.10);
    --accent:#d84315;--radius:14px;--max-width:1160px;--shadow:0 18px 56px rgba(10,10,10,0.12);
    --heading-font:'Tangerine',serif;--ui-font:'Poppins',system-ui,-apple-system,'Segoe UI',Roboto,Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:var(--ui-font);color:var(--text-color);
       background:var(--bg-gradient);background-attachment:fixed;background-size:300% 300%;
       transition:background 800ms ease,color 400ms ease;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
  @keyframes bgShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  body.animateGrad{animation:bgShift 18s ease-in-out infinite}
  .wrap{max-width:var(--max-width);margin:26px auto;padding:22px}
  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
  .brand{display:flex;align-items:center;gap:14px;text-decoration:none;color:inherit}
  .logo{width:76px;height:76px;border-radius:18px;background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));
        display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-family:'Tangerine',cursive;font-size:40px;text-shadow:0 4px 12px rgba(0,0,0,0.5);}
  h1{font-family:var(--heading-font);margin:0;font-size:32px;color:#fff}
  .tag{font-size:13px;color:rgba(255,255,255,0.85);margin-top:2px}
  nav.top-tabs{display:flex;gap:10px;align-items:center}
  .tab{padding:9px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.95);background:rgba(255,255,255,0.04);cursor:pointer;font-weight:600;color:inherit}
  .tab.active{background:rgba(255,255,255,0.60);box-shadow:0 8px 28px rgba(0,0,0,0.08)}
  .btn{background:var(--accent);color:white;padding:9px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer;box-shadow:0 12px 26px rgba(216,67,21,0.12)}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.95);color:inherit}
  .layout{display:grid;grid-template-columns:1fr 380px;gap:20px;align-items:start}
  @media(max-width:980px){.layout{grid-template-columns:1fr;padding:0 12px}}
  .card{background:var(--card-bg);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:14px}
  .hero{display:flex;gap:18px;align-items:center;padding:20px;border-radius:18px;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));backdrop-filter:blur(4px)}
  .hero h2{font-family:var(--heading-font);margin:0;font-size:36px;color:#fff}
  .hero p{margin:6px 0 0 0;color:rgba(255,255,255,0.9);max-width:620px}
  .hero-img{width:320px;height:180px;object-fit:cover;border-radius:12px;box-shadow:0 12px 28px rgba(0,0,0,0.3)}
  .muted{color:var(--muted)}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

  /* --- Updated slot styling --- */
  .slot{
    padding:8px;
    border-radius:8px;
    border:1px solid #ddd;
    text-align:center;
    cursor:pointer;
    background:#fff;
    transition:transform 0.15s ease, background-color 0.15s ease, box-shadow 0.15s ease;
  }
  .slot:hover:not(.booked){
    transform:scale(1.05);
    box-shadow:0 0 8px rgba(0,0,0,0.15);
  }
  .slot.booked{
    background:#2b7be9;
    color:#fff;
    border-color:#2b7be9;
    cursor:not-allowed;
  }
  .slot.selected{
    background:var(--accent);
    color:#fff;
    border-color:var(--accent);
    transform:scale(1.1);
    box-shadow:0 0 10px rgba(216,67,21,0.4);
  }
</style>
</head>
<body class="animateGrad">
  <div class="wrap">
    <header>
      <a class="brand" href="#" onclick="activateTab('home');return false;">
        <div class="logo">LL</div>
        <div>
          <h1>La Lumière</h1>
          <div class="tag">Modern French–Fusion · Sandton, Johannesburg</div>
        </div>
      </a>

      <nav class="top-tabs">
        <button class="tab active" onclick="activateTab('home')">Home</button>
        <button class="tab" onclick="activateTab('menu')">Menu</button>
        <button class="tab" onclick="activateTab('booking')">Booking</button>
        <button class="tab" onclick="activateTab('contact')">Contact</button>
        <div style="width:12px"></div>
        <div style="display:flex;gap:8px">
          <button class="btn ghost" id="btnSignIn">Sign In</button>
          <button class="btn" id="btnSignUp">Create Account</button>
        </div>
      </nav>
    </header>

    <main class="layout">
      <section id="home" class="card tab-panel">
        <div class="hero">
          <div>
            <h2>La Lumière — refined French fusion</h2>
            <p>We combine French culinary artistry with South African ingredients — multi-course tasting menus, seasonal produce and award-winning wines.</p>
            <div style="margin-top:14px;display:flex;gap:10px;align-items:center">
              <button class="btn" onclick="activateTab('booking')">Book a Table</button>
              <button class="btn ghost" onclick="activateTab('menu')">See Menu & Order</button>
              <div style="margin-left:auto;color:#fff;font-size:13px">Open: 12:00 — 00:00</div>
            </div>
          </div>
          <img class="hero-img" src="https://restaurant-project-2025.s3.eu-north-1.amazonaws.com/images/elegant-dining-table-with-a-plate-of-gourmet-food-and-wine-glass.jpg" alt="Dining table">
        </div>
      </section>

      <section id="menu" class="card tab-panel" style="display:none">
        <h2>Menu & Orders</h2>
        <div id="menuGrid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px"></div>
        <div class="card" style="margin-top:16px">
          <h3>Your Order</h3>
          <div id="cartItems" class="muted">Cart is empty.</div>
          <button class="btn" id="placeOrderBtn" style="margin-top:8px">Place Order (collection)</button>
        </div>
      </section>

      <section id="booking" class="card tab-panel" style="display:none">
        <h2>Booking</h2>
        <p class="muted">Blue slots are already booked. Select a white slot to book.</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <input type="date" id="bookingDate" />
          <select id="durationSelect">
            <option value="0.5">30 min</option>
            <option value="1">1 hour</option>
            <option value="1.5">1.5 hours</option>
            <option value="2">2 hours</option>
          </select>
          <input type="number" id="guestsInput" min="1" value="2" placeholder="Guests" />
          <input type="number" id="estimateBill" min="0" placeholder="Estimate bill (R)" />
        </div>
        <div id="slotsNotice" class="muted" style="margin-top:10px">Select a date to load slots.</div>
        <div id="timeGrid" style="margin-top:8px;display:grid;grid-template-columns:repeat(6,1fr);gap:8px"></div>
        <div id="depositRow" style="display:none;margin-top:12px">
          <label><input type="checkbox" id="depositAccept"> I accept a 10% deposit for bookings longer than 1 hour.</label>
        </div>
        <textarea id="bookingNotes" placeholder="Notes (occasion, requests)" rows="2" style="width:100%;margin-top:8px"></textarea>
        <button class="btn" id="confirmBookingBtn" style="margin-top:10px" disabled>Confirm Booking</button>
      </section>

      <section id="contact" class="card tab-panel" style="display:none">
        <h2>Contact</h2>
        <p class="muted">Sandton, Johannesburg, South Africa</p>
      </section>
    </main>

    <footer>© <span id="year"></span> La Lumière — Demo Mode</footer>
  </div>

  <!-- Signup Modal -->
  <div id="modalRoot" class="modal-backdrop" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;">
    <div style="background:white;padding:20px;border-radius:12px;max-width:500px;width:100%">
      <h3>Create account</h3>
      <input id="suName" placeholder="Full name" style="width:100%;margin-top:6px"><br>
      <input id="suEmail" placeholder="Email" style="width:100%;margin-top:6px"><br>
      <input id="suPassword" type="password" placeholder="Password (min 6)" style="width:100%;margin-top:6px"><br>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="btn" id="submitSignup">Create</button>
        <button class="btn ghost" id="closeSignup">Cancel</button>
      </div>
    </div>
  </div>

<script>
const IMG_PREFIX = "https://restaurant-project-2025.s3.eu-north-1.amazonaws.com/images/";

function activateTab(name){
  document.querySelectorAll('.tab-panel').forEach(p=>p.style.display='none');
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById(name).style.display='block';
  [...document.querySelectorAll('.tab')].find(t=>t.textContent.toLowerCase().includes(name))?.classList.add('active');
}

function showModal(){ document.getElementById('modalRoot').style.display='flex'; }
function hideModal(){ document.getElementById('modalRoot').style.display='none'; }

function getSessionEmail(){ return localStorage.getItem('ll_user_email') || null; }
function setSessionEmail(e){ localStorage.setItem('ll_user_email', e); updateSignedInUI(); }
function clearSession(){ localStorage.removeItem('ll_user_email'); updateSignedInUI(); }

function updateSignedInUI(){
  const e = getSessionEmail();
  const btn = document.getElementById('btnSignIn');
  if(e){ btn.textContent = `Signed in: ${e}`; document.getElementById('btnSignUp').style.display='none'; }
  else{ btn.textContent='Sign In'; document.getElementById('btnSignUp').style.display='inline-block'; }
}

document.getElementById('btnSignIn').onclick = ()=>{
  const e = getSessionEmail();
  if(e && confirm('Sign out?')){ clearSession(); return; }
  showModal();
};
document.getElementById('btnSignUp').onclick = showModal;
document.getElementById('closeSignup').onclick = hideModal;

/* ---------- Local DB helpers ---------- */
function loadLocal(k){ return JSON.parse(localStorage.getItem(k)||'[]'); }
function saveLocal(k,v){ localStorage.setItem(k,JSON.stringify(v)); }

/* ---------- Signup ---------- */
document.getElementById('submitSignup').onclick = ()=>{
  const name = suName.value.trim(), email = suEmail.value.trim(), pass = suPassword.value;
  if(!name||!email||pass.length<6){ alert('Fill all fields correctly.'); return; }
  const users = loadLocal('ll_users');
  if(users.find(u=>u.email===email)){ alert('Account already exists.'); return; }
  users.push({name,email,pass,created:new Date().toISOString()});
  saveLocal('ll_users',users);
  setSessionEmail(email);
  alert('Account created locally.');
  hideModal();
};

/* ---------- Menu ---------- */
const menuItems=[
  {id:'starter',name:'Amuse-bouche',price:75,img:'Simple-starter-ideas-cae7ece.jpg'},
  {id:'seafood',name:'Seafood Intermezzo',price:180,img:'assorted-gourmet-snacks-on-a-platter.jpg'},
  {id:'venison',name:'Venison & Rooibos Jus',price:320,img:'Rum-and-Guava-Glazed-Spareribs-FT-RECIPE0723-c1ddf641aa254f38a4c7194f85f45012.jpg'},
  {id:'dessert',name:'Chocolate Tartelette',price:95,img:'berry-cheesecake.jpg'}
];
let CART=[];
function renderMenu(){
  const grid=document.getElementById('menuGrid'); grid.innerHTML='';
  menuItems.forEach(it=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<img src="${IMG_PREFIX+it.img}" style="width:100%;height:140px;object-fit:cover;border-radius:8px">
      <b>${it.name}</b><div class="muted">R ${it.price}</div>
      <button class='btn' style='margin-top:6px'>Add</button>`;
    div.querySelector('button').onclick=()=>{ CART.push({...it,qty:1}); renderCart(); };
    grid.appendChild(div);
  });
}
function renderCart(){
  const el=document.getElementById('cartItems');
  if(CART.length===0){ el.textContent='Cart is empty.'; return; }
  el.innerHTML=''; let total=0;
  CART.forEach((c,i)=>{ total+=c.price*c.qty;
    const row=document.createElement('div');
    row.innerHTML=`${c.name} (x${c.qty}) — R ${c.price*c.qty}`;
    el.appendChild(row);
  });
  el.innerHTML+=`<div style='margin-top:6px'><b>Total: R ${total}</b></div>`;
}
document.getElementById('placeOrderBtn').onclick=()=>{
  const e=getSessionEmail(); if(!e){alert('Sign in first.');return;}
  if(CART.length===0){alert('Cart empty.');return;}
  const orders=loadLocal('ll_orders');
  const orderId='ORD'+Date.now();
  orders.push({orderId,email:e,items:CART,created:new Date().toISOString()});
  saveLocal('ll_orders',orders);
  alert('Order saved locally.');
  CART=[]; renderCart();
};

/* ---------- Booking ---------- */
const TIME_SLOTS=[]; for(let h=12;h<=23;h++){TIME_SLOTS.push(`${String(h).padStart(2,'0')}:00`,`${String(h).padStart(2,'0')}:30`);} TIME_SLOTS.push('00:00');
let bookedSlotsCache=[],selectedSlot=null;
function renderSlotsForDate(date){
  const grid=document.getElementById('timeGrid'); grid.innerHTML='';
  TIME_SLOTS.forEach(label=>{
    const div=document.createElement('div'); div.className='slot'; div.textContent=label;
    const iso=date+'T'+label+':00';
    if(bookedSlotsCache.includes(iso)) div.classList.add('booked');
    else div.onclick=()=>{
      document.querySelectorAll('.slot').forEach(s=>s.classList.remove('selected'));
      div.classList.add('selected');
      selectedSlot=iso;
      updateDepositAndConfirm();
    };
    grid.appendChild(div);
  });
}
function fetchBookedSlots(date){
  const all=loadLocal('ll_bookings');
  bookedSlotsCache=all.filter(b=>b.date===date).map(b=>b.dateTime);
  renderSlotsForDate(date);
}
function updateDepositAndConfirm(){
  const dur=parseFloat(durationSelect.value);
  const est=parseFloat(estimateBill.value)||0;
  const depo=document.getElementById('depositRow');
  const btn=document.getElementById('confirmBookingBtn');
  if(!selectedSlot){btn.disabled=true;depo.style.display='none';return;}
  if(dur>1){depo.style.display='block';btn.disabled=!depositAccept.checked;}
  else{depo.style.display='none';btn.disabled=false;}
}
durationSelect.onchange=updateDepositAndConfirm;
estimateBill.oninput=updateDepositAndConfirm;
depositAccept.onchange=updateDepositAndConfirm;
bookingDate.value=new Date().toISOString().slice(0,10);
bookingDate.onchange=e=>fetchBookedSlots(e.target.value);

confirmBookingBtn.onclick=()=>{
  const e=getSessionEmail(); if(!e){alert('Sign in first.');return;}
  if(!selectedSlot){alert('Select slot.');return;}
  const date=bookingDate.value,dur=parseFloat(durationSelect.value),est=parseFloat(estimateBill.value)||0;
  if(dur>1&&!depositAccept.checked){alert('Accept 10% deposit.');return;}
  const bookings=loadLocal('ll_bookings');
  bookings.push({id:'BOOK'+Date.now(),user:e,date,dateTime:selectedSlot,durationHours:dur,estimate:est,created:new Date().toISOString()});
  saveLocal('ll_bookings',bookings);
  alert('Booking saved locally.');
  fetchBookedSlots(date);
};

document.getElementById('year').textContent=new Date().getFullYear();
renderMenu(); renderCart(); updateSignedInUI(); fetchBookedSlots(bookingDate.value);
</script>
</body>
</html>
